generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["views"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            Int            @id @unique @default(autoincrement())
  email         String         @unique
  password      String
  pseudo        String         @unique
  // birthDate         DateTime          @default(now())
  refreshTokens RefreshToken[]
  createdAt     DateTime       @default(now())
  updatedAt     DateTime       @default(now()) @updatedAt
}

model RefreshToken {
  id          String   @id @unique @default(uuid())
  hashedToken String
  userId      Int
  User        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  revoked     Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @default(now()) @updatedAt
}

model Price {
  id        Int      @id @unique @default(autoincrement())
  id_item   Int
  price_t   Float
  createdAt DateTime @default(now())
  item      item     @relation(fields: [id_item], references: [id])
}

model RunesPrice {
  id        Int      @id @unique @default(autoincrement())
  id_effect Int
  price     Float
  createdAt DateTime @default(now())
}

model TauxItemBrisage {
  id Int @id @unique @default(autoincrement())
  id_item Int
  taux Int
  id_server Int
  createdAt DateTime @default(now())
  item      item     @relation(fields: [id_item], references: [id])
}

model profus_app_itemaveragepriceentry {
  id         Int      @id @unique @default(autoincrement())
  saved_date DateTime @default(now())
  price      Int
  item_id    Int
  server_id  Int
  user_id    Int?
  item      item     @relation(fields: [item_id], references: [id])
}

view Renamedclass {
  id            Int      @unique
  name_en       String?
  name_es       String?
  name_fr       String?
  name_de       String?
  name_pt       String?
  name_it       String?
  male_look     String?
  female_look   String?
  male_colors   BigInt[]
  female_colors BigInt[]

  @@map("class")
}

/// The underlying view does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
view class_spell {
  class_id Int     @unique
  spell_id BigInt?
}

/// The underlying view does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
view dungeon {
  id      Int     @unique
  name_en String?
  name_es String?
  name_fr String?
  name_de String?
  name_pt String?
  name_it String?
  level   Int?
}

/// The underlying view does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
view item {
  id          Int           @unique
  name_en     String
  name_es     String
  name_fr     String
  name_de     String
  name_pt     String
  name_it     String
  type_id     Int
  desc_en     String
  desc_es     String
  desc_fr     String
  desc_de     String
  desc_pt     String
  desc_it     String
  icon_id     Int
  level       Int
  pods        Int
  price       Decimal       @db.Decimal
  item_set_id Int
  criteria    String
  pet_food_xp Int
  nuggets     Int
  item_type   item_type     @relation(fields: [type_id], references: [id])
  item_effect item_effect[]
  item_price  Price[]
  rune_price  profus_app_itemaveragepriceentry[]
  taux_item  TauxItemBrisage[]
}

/// The underlying view does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
view item_effect {
  item_id      Int      @unique
  effect_id    Int?
  min          Int?
  max          Int?
  value        Int?
  desc_fr      String?
  desc_en      String?
  desc_es      String?
  desc_pt      String?
  desc_de      String?
  desc_it      String?
  category     Int?
  boost        Boolean?
  power        Decimal? @db.Decimal
  element_id   Int?
  element_name String?
  rune_item_id Int?
  item         item     @relation(fields: [item_id], references: [id])
}

/// The underlying view does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
view item_set {
  id      Int     @unique
  name_en String?
  name_es String?
  name_fr String?
  name_de String?
  name_pt String?
  name_it String?
}

/// The underlying view does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
view item_set_effect {
  item_set_id Int     @unique
  item_count  Int?
  max         Int?
  effect_id   Int?
  desc_fr     String?
  desc_en     String?
  desc_es     String?
  desc_pt     String?
  desc_de     String?
  desc_it     String?
}

/// The underlying view does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
view item_set_damage {
  item_set_id     Int      @unique
  item_count      Int?
  res_per_earth   BigInt?
  res_per_water   BigInt?
  res_per_air     BigInt?
  res_per_fire    BigInt?
  res_per_neutral BigInt?
  res_earth       BigInt?
  res_water       BigInt?
  res_air         BigInt?
  res_fire        BigInt?
  res_neutral     BigInt?
  res_crit        BigInt?
  res_pou         BigInt?
  PA              BigInt?
  PM              BigInt?
  PO              BigInt?
  Invo            BigInt?
  do_ren          BigInt?
  crit            BigInt?
  fui             Decimal? @db.Decimal
  tac             Decimal? @db.Decimal
  ret_pm          Decimal? @db.Decimal
  ret_pa          Decimal? @db.Decimal
  esq_pm          Decimal? @db.Decimal
  esq_pa          Decimal? @db.Decimal
  pp              Decimal? @db.Decimal
  sasa            BigInt?
  vita            BigInt?
  ini             BigInt?
  pods            BigInt?
  pwr_all         BigInt?
  add_all         BigInt?
  add_neutral     BigInt?
  pwr_earth       BigInt?
  add_earth       BigInt?
  pwr_fire        BigInt?
  add_fire        BigInt?
  pwr_air         BigInt?
  add_air         BigInt?
  pwr_water       BigInt?
  add_water       BigInt?
  add_heal        BigInt?
  pwr_pi          BigInt?
  add_pi          BigInt?
  add_crit        BigInt?
  add_pou         BigInt?
  dmg_spell       BigInt?
  dmg_weapon      BigInt?
  dmg_range       BigInt?
  dmg_melee       BigInt?
}

/// The underlying view does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
view item_type {
  id         Int     @unique
  name_en    String?
  name_es    String?
  name_fr    String?
  name_de    String?
  name_pt    String?
  name_it    String?
  super_type Int?
  category   Int?
  item       item[]
}

/// The underlying view does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
view job {
  id      Int     @unique
  name_en String?
  name_es String?
  name_fr String?
  name_de String?
  name_pt String?
  name_it String?
  icon_id Int?
}

/// The underlying view does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
view job_action {
  item_id       Int      @unique
  is_craft      Boolean?
  level         Int?
  ingredientIds Int[]
  quantities    BigInt[]
  xp            Decimal? @db.Decimal
  job_id        Int?
  name_en       String?
  name_es       String?
  name_fr       String?
  name_de       String?
  name_pt       String?
  name_it       String?
  icon_id       Int?
  price         Decimal? @db.Decimal
  skill_name_en String?
  skill_name_es String?
  skill_name_fr String?
  skill_name_de String?
  skill_name_pt String?
  skill_name_it String?
}

/// The underlying view does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
view job_craft_ingredient {
  id            Int     @unique
  item_id       Int?
  ingredient_id Int?
  quantity      BigInt?
  name_en       String?
  name_es       String?
  name_fr       String?
  name_de       String?
  name_pt       String?
  name_it       String?
  icon_id       Int?
  type_id       Int?
  pods          Int?
  level         Int?
}

/// The underlying view does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
view weapon {
  id                     Int  @unique
  criticalHitBonus       Int?
  min_range              Int?
  criticalHitProbability Int?
  range                  Int?
  ap_cost                Int?
  maxCastPerTurn         Int?
}
